<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOEFL iBT - Read in Daily Life (1)</title>
<link rel="stylesheet" href="css/common.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#fff;min-height:100vh;display:flex;flex-direction:column;color:#2d3748;line-height:1.7}

/* ===== TOP NAV ===== */
.top-nav{background:#fff;border-bottom:1px solid #e2e8f0;padding:10px 24px;display:flex;align-items:center;justify-content:space-between}
.top-nav-left{display:flex;align-items:center;gap:16px;font-size:.9em;color:#4a5568}
.top-nav-left strong{color:#2d3748}
.top-nav-right{display:flex;align-items:center;gap:12px}
.timer-btn{background:none;border:1px solid #cbd5e0;border-radius:6px;padding:6px 14px;font-size:.85em;color:#4a5568;cursor:pointer;font-family:inherit;transition:all .2s}
.timer-btn:hover{background:#f7fafc}
.timer-display{font-family:'Courier New',monospace;font-size:.9em;color:#2d3748;font-weight:600;min-width:60px;text-align:center}
.review-btn{background:#4a90d9;color:#fff;border:none;border-radius:14px;padding:6px 18px;font-size:.85em;cursor:pointer;font-family:inherit;font-weight:500;transition:all .2s}
.review-btn:hover{background:#3a7bc8}
.user-badge{font-size:.8em;color:#718096}
.user-badge strong{color:#2d3748}

/* ===== PROGRESS BAR ===== */
.progress-bar{height:4px;background:#ebf4ff;width:100%}
.progress-fill{height:100%;background:#3182ce;border-radius:2px;transition:width .3s}

/* ===== SPLIT LAYOUT ===== */
.split-main{flex:1;display:flex;padding:0 0 80px 0;overflow:hidden}
.passage-panel{flex:1;padding:32px 28px;overflow-y:auto;border-right:1px solid #e2e8f0;background:#f9fafb}
.question-panel{flex:1;padding:32px 28px;overflow-y:auto}
.instruction{font-weight:600;font-size:.9em;color:#4a90d9;margin-bottom:16px}

/* ===== NOTICE STYLES ===== */
.notice-container{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.06)}
.notice-header{background:#2d3748;color:#fff;font-weight:700;font-size:1.05em;padding:14px 20px;text-align:center;letter-spacing:.5px}
.notice-subheader{text-align:center;color:#4a5568;padding:10px 20px;border-bottom:1px solid #e2e8f0;font-size:.9em}
.notice-body{padding:18px 20px;font-size:.92em;line-height:1.7;color:#2d3748}
.notice-body p{margin-bottom:10px}
.notice-body p:last-child{margin-bottom:0}
.notice-footer{background:#f7fafc;padding:12px 20px;border-top:1px solid #e2e8f0;font-size:.85em;color:#718096;text-align:center}

/* ===== QUESTION STYLES ===== */
.question-page{display:none}
.question-page.active{display:block}
.question-text{font-size:.95em;font-weight:600;color:#2d3748;margin-bottom:20px;line-height:1.6}
.question-number{color:#4a90d9;margin-right:6px}
.options{display:flex;flex-direction:column;gap:10px}
.option{display:flex;align-items:flex-start;gap:10px;padding:12px 16px;border:1px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .15s;font-size:.92em;line-height:1.5}
.option:hover{background:#f7fafc;border-color:#cbd5e0}
.option.selected{background:#ebf4ff;border-color:#4a90d9}
.option input{display:none}
.option-label{font-weight:600;color:#4a90d9;min-width:28px}
.option-text{flex:1;color:#2d3748}

/* ===== FOOTER NAV ===== */
.reading-footer{position:fixed;bottom:0;left:0;right:0;background:#fff;border-top:1px solid #e2e8f0;padding:14px 24px;display:flex;justify-content:flex-end;gap:12px;z-index:100}
.btn-nav{display:inline-flex;align-items:center;gap:8px;padding:12px 28px;font-size:.95em;font-family:inherit;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .2s}
.btn-back{color:#4a5568;background:#fff;border:1px solid #e2e8f0}
.btn-back:hover{background:#f7fafc}
.btn-back:disabled{opacity:.5;cursor:not-allowed}
.btn-next{color:#fff;background:#2d3748}
.btn-next:hover{background:#1a202c}
.btn-next svg{width:16px;height:16px;fill:currentColor}

/* ===== REVIEW OVERLAY ===== */
.overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.45);z-index:200;justify-content:center;align-items:center}
.overlay.active{display:flex}
.review-panel{background:#fff;border-radius:12px;width:90%;max-width:820px;max-height:80vh;display:flex;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.2)}
.review-left{flex:55%;border-right:1px solid #e2e8f0;overflow-y:auto;padding:0}
.review-right{flex:45%;padding:28px;overflow-y:auto;background:#f9fafb}
.review-header{display:flex;justify-content:space-between;align-items:center;padding:18px 20px;border-bottom:1px solid #e2e8f0;position:sticky;top:0;background:#fff;z-index:1}
.review-header h3{font-size:1em;color:#2d3748}
.review-close{background:none;border:none;font-size:1.3em;cursor:pointer;color:#718096;padding:4px 8px;border-radius:4px}
.review-close:hover{background:#f7fafc}
.review-row{display:flex;padding:12px 20px;border-bottom:1px solid #f0f0f0;cursor:pointer;align-items:center;font-size:.88em;transition:background .15s}
.review-row:hover,.review-row.active{background:#ebf4ff}
.review-no{width:36px;color:#718096;font-weight:500}
.review-q{flex:1;color:#2d3748}
.review-status{font-size:.8em;padding:3px 10px;border-radius:10px;white-space:nowrap}
.review-status.answered{background:#c6f6d5;color:#22543d}
.review-status.not-answered{background:#fed7d7;color:#9b2c2c}
.review-status.coming{background:#e2e8f0;color:#718096}
.detail-label{display:inline-block;background:#ebf4ff;color:#4a90d9;font-size:.75em;font-weight:600;padding:3px 10px;border-radius:10px;margin-bottom:12px}
.detail-title{font-size:1.05em;font-weight:700;color:#2d3748;margin-bottom:12px}
.detail-desc{font-size:.88em;color:#4a5568;line-height:1.65;margin-bottom:20px}
.btn-goto{display:inline-flex;align-items:center;gap:6px;padding:8px 18px;font-size:.85em;font-family:inherit;font-weight:600;color:#fff;background:#4a90d9;border:none;border-radius:14px;cursor:pointer;transition:all .2s}
.btn-goto:hover{background:#3a7bc8}
.btn-goto.disabled{background:#cbd5e0;cursor:not-allowed}
</style>
</head>
<body>

<!-- TOP NAV -->
<div class="top-nav">
  <div class="top-nav-left">
    <span>Question <strong id="qLabel">11</strong> of 20</span>
    <span>|</span>
    <span>Reading</span>
  </div>
  <div class="top-nav-right">
    <span class="timer-display" id="timer">32:45</span>
    <button class="timer-btn" onclick="toggleTimer()">Hide Time</button>
    <button class="review-btn" onclick="openReview()">Review</button>
    <span class="user-badge" id="userBadge"></span>
  </div>
</div>
<div class="progress-bar"><div class="progress-fill" style="width:25%"></div></div>

<!-- SPLIT LAYOUT -->
<div class="split-main">
  <!-- LEFT: Passage (fixed) -->
  <div class="passage-panel">
    <p class="instruction">Read a notice.</p>
    <div class="notice-container">
      <div class="notice-header">LIBRARY HOURS CHANGE</div>
      <div class="notice-subheader">Effective March 3 – March 14</div>
      <div class="notice-body">
        <p>Due to heating system repairs, the West Campus Library will close at 6:00 PM instead of the usual 10:00 PM on weekdays. Weekend hours (9 AM – 5 PM) are not affected.</p>
        <p>The 24-hour study room on the ground floor will remain open as usual. Please bring your student ID for after-hours access.</p>
      </div>
      <div class="notice-footer">Questions? Contact the Library Help Desk: lib-help@westcampus.edu</div>
    </div>
  </div>

  <!-- RIGHT: Questions -->
  <div class="question-panel">
    <!-- Page 1: Q11 -->
    <div class="question-page active" id="page1">
      <p class="question-text"><span class="question-number">11.</span> Why will the library close earlier on weekdays?</p>
      <div class="options">
        <label class="option" data-q="q11" data-v="A" onclick="selectOption(this)">
          <input type="radio" name="q11" value="A">
          <span class="option-label">(A)</span>
          <span class="option-text">There is a staff shortage.</span>
        </label>
        <label class="option" data-q="q11" data-v="B" onclick="selectOption(this)">
          <input type="radio" name="q11" value="B">
          <span class="option-label">(B)</span>
          <span class="option-text">The heating system is being repaired.</span>
        </label>
        <label class="option" data-q="q11" data-v="C" onclick="selectOption(this)">
          <input type="radio" name="q11" value="C">
          <span class="option-label">(C)</span>
          <span class="option-text">The building is being renovated.</span>
        </label>
        <label class="option" data-q="q11" data-v="D" onclick="selectOption(this)">
          <input type="radio" name="q11" value="D">
          <span class="option-label">(D)</span>
          <span class="option-text">A new schedule is being tested.</span>
        </label>
      </div>
    </div>

    <!-- Page 2: Q12 -->
    <div class="question-page" id="page2">
      <p class="question-text"><span class="question-number">12.</span> What can students still use after 6:00 PM during this period?</p>
      <div class="options">
        <label class="option" data-q="q12" data-v="A" onclick="selectOption(this)">
          <input type="radio" name="q12" value="A">
          <span class="option-label">(A)</span>
          <span class="option-text">The main reading room</span>
        </label>
        <label class="option" data-q="q12" data-v="B" onclick="selectOption(this)">
          <input type="radio" name="q12" value="B">
          <span class="option-label">(B)</span>
          <span class="option-text">The computer lab on the second floor</span>
        </label>
        <label class="option" data-q="q12" data-v="C" onclick="selectOption(this)">
          <input type="radio" name="q12" value="C">
          <span class="option-label">(C)</span>
          <span class="option-text">The 24-hour study room on the ground floor</span>
        </label>
        <label class="option" data-q="q12" data-v="D" onclick="selectOption(this)">
          <input type="radio" name="q12" value="D">
          <span class="option-label">(D)</span>
          <span class="option-text">The Library Help Desk</span>
        </label>
      </div>
    </div>
  </div>
</div>

<!-- FOOTER NAV -->
<div class="reading-footer">
  <button class="btn-nav btn-back" id="btnBack" onclick="changePage(-1)" disabled>&#8249; Back</button>
  <button class="btn-nav btn-next" id="btnNext" onclick="changePage(1)">Next &#8250;
    <svg viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
  </button>
</div>

<!-- REVIEW OVERLAY -->
<div class="overlay" id="reviewOverlay">
  <div class="review-panel">
    <div class="review-left">
      <div class="review-header">
        <h3>Review Questions</h3>
        <button class="review-close" onclick="closeReview()">&times;</button>
      </div>
      <div id="reviewList"></div>
    </div>
    <div class="review-right" id="reviewDetail">
      <div class="detail-label">Reading</div>
      <div class="detail-title">Select a question to see details</div>
      <div class="detail-desc">Click on any question in the list to view its description and navigate to it.</div>
    </div>
  </div>
</div>

<script>
/* ===== DATA ===== */
var answers = { q11: "B", q12: "C" };
var currentPage = 1;
var totalPages = 2;
var startQ = 11;
var userAnswers = {};

/* ===== REVIEW DATA ===== */
var questions = [
  {no:"1-10",  title:"Complete the Words",       desc:"Fill in the missing letters in the paragraph.", section:"Reading", page:"reading-ctw.html"},
  {no:"11",    title:"Read a Notice (Q11)",       desc:"Read a notice about library hours and answer a factual question.", section:"Reading", page:"reading-rdl1.html", qPage:1},
  {no:"12",    title:"Read a Notice (Q12)",       desc:"Read the same notice and answer a detail question.", section:"Reading", page:"reading-rdl1.html", qPage:2},
  {no:"13",    title:"Read an Email (Q13)",       desc:"Read an email and answer a question.", section:"Reading", page:"reading-rdl2.html"},
  {no:"14",    title:"Read an Email (Q14)",       desc:"Read the same email and answer a second question.", section:"Reading", page:"reading-rdl2.html"},
  {no:"15",    title:"Read an Email (Q15)",       desc:"Read the same email and answer a third question.", section:"Reading", page:"reading-rdl2.html"},
  {no:"16-20", title:"Academic Passage",          desc:"Read an academic passage and answer questions.", section:"Reading", page:null}
];

/* ===== PAGE NAVIGATION ===== */
function changePage(dir){
  var next = currentPage + dir;
  if(next < 1 || next > totalPages) return;
  document.getElementById('page'+currentPage).classList.remove('active');
  currentPage = next;
  document.getElementById('page'+currentPage).classList.add('active');
  document.getElementById('qLabel').innerHTML = '<strong>'+(startQ + currentPage - 1)+'</strong>';
  document.getElementById('btnBack').disabled = (currentPage === 1);
  /* On last page, Next goes to next section */
  if(currentPage === totalPages){
    document.getElementById('btnNext').onclick = function(){ goNext(); };
  } else {
    document.getElementById('btnNext').onclick = function(){ changePage(1); };
  }
}

/* ===== OPTION SELECT ===== */
function selectOption(el){
  var q = el.getAttribute('data-q');
  var v = el.getAttribute('data-v');
  userAnswers[q] = v;
  el.parentElement.querySelectorAll('.option').forEach(function(o){ o.classList.remove('selected'); });
  el.classList.add('selected');
  el.querySelector('input').checked = true;
}

/* ===== TIMER ===== */
var timeLeft = 32*60+45;
var timerVisible = true;
var timerInterval = setInterval(function(){
  timeLeft--;
  if(timeLeft <= 0){ clearInterval(timerInterval); timeLeft = 0; }
  var m = Math.floor(timeLeft/60);
  var s = timeLeft%60;
  document.getElementById('timer').textContent = m + ':' + (s<10?'0':'') + s;
}, 1000);

function toggleTimer(){
  timerVisible = !timerVisible;
  document.getElementById('timer').style.visibility = timerVisible ? 'visible' : 'hidden';
  document.querySelector('.timer-btn').textContent = timerVisible ? 'Hide Time' : 'Show Time';
}

/* ===== REVIEW ===== */
function openReview(){
  var html = '';
  questions.forEach(function(q, i){
    var st, cls;
    if(q.no === '11' || q.no === '12'){
      var key = 'q'+q.no;
      st = userAnswers[key] ? 'Answered' : 'Not Answered';
      cls = userAnswers[key] ? 'answered' : 'not-answered';
    } else if(q.no === '1-10'){
      st = 'Completed'; cls = 'answered';
    } else if(q.page){
      st = 'Not Started'; cls = 'not-answered';
    } else {
      st = 'Coming Soon'; cls = 'coming';
    }
    html += '<div class="review-row" onclick="showDetail('+i+')" data-idx="'+i+'">';
    html += '<span class="review-no">'+q.no+'</span>';
    html += '<span class="review-q">'+q.title+'</span>';
    html += '<span class="review-status '+cls+'">'+st+'</span></div>';
  });
  document.getElementById('reviewList').innerHTML = html;
  document.getElementById('reviewOverlay').classList.add('active');
  showDetail(1);
}

function showDetail(idx){
  var q = questions[idx];
  document.querySelectorAll('.review-row').forEach(function(r){r.classList.remove('active')});
  var rows = document.querySelectorAll('.review-row');
  if(rows[idx]) rows[idx].classList.add('active');
  var btn;
  if(q.page){
    btn = '<button class="btn-goto" onclick="closeReview()">Go to Question &#8250;</button>';
  } else {
    btn = '<button class="btn-goto disabled" disabled>Coming Soon</button>';
  }
  document.getElementById('reviewDetail').innerHTML =
    '<div class="detail-label">'+q.section+'</div>'+
    '<div class="detail-title">'+q.title+'</div>'+
    '<div class="detail-desc">'+q.desc+'</div>'+btn;
}

function closeReview(){ document.getElementById('reviewOverlay').classList.remove('active'); }
document.getElementById('reviewOverlay').addEventListener('click', function(e){ if(e.target===this) closeReview(); });

/* ===== NAVIGATION ===== */
function goNext(){ window.location.href = 'reading-rdl2.html'; }

/* ===== AUTH ===== */
if(typeof Auth !== 'undefined'){ Auth.require(); Auth.showBadge('userBadge'); }
</script>
<script src="js/auth.js"></script>
</body>
</html>
